require("prelude-ls").installPrelude(global);
require("viclib")();
(function(){
  global.level = mixin(function(){
    var this$ = this;
    defer(function(){
      return this$.width = this$.map[0].length * B;
    });
    return {
      map: ['.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo.............................oo...........................................................', '.............................................................................................................................................................................................oo..x.x.x.x.x.....x.x...x......oo............................................................', '.............................................................................................................................................................................................ooHooooooooooooo..oooox.oooooo.oo...........................................................', '.............................................................................................................................................................................................ooHooooooooooooox.oooooooooooo.oo...........................................................', '.............................................................................................................................................................................................ooHooooooooooooooooooooooooooo.oo...........................................................', '.............................................................................................................................................................................................ooH.ooooooooooooooo............oo', '.............................................................................................................................................................................................ooH.ooo.........ooo............oo', '.............................................................................................................................................................................................ooH.............ooo............oo', '.............................................................................................................................................................................................ooH.oooooooooXoHooo............oo', '.............................................................................................................................................................................................ooH.oooooooooXoHooo............oo', '.............................................................................................................................................................................................ooH.oooooooooXoHooo............oo', '.............................................................................................................................................................................................ooH.oooooooooXoHooo............oo', '.............................................................................................................................................................................................oo..........oXoHooo............oo', '.............................................................................................................................................................................................oo..........oXoHooo............oo', '.............................................................................................................................................................................................oo..........oXoHooo............oo', '.............................................................................................................................................................................................oooooooooooHoXoHooo............oo', '.............................................................................................................................................................................................oooooooooooHoXoHooo............oo', '.............................................................................................................................................................................................oooooooooooHoXoHooo....oooo....oo', '.............................................................................................................................................................................................oooooooooooHoXoHooo..ooo..ooo..oo', '.............................................................................................................................................................................................oooooooooooHoXoHooooooooooooooooo', '.............................................................................................................................................................................................oooooooooooHoXoHooooooooooooooooo', '............................................................................................................................oooooo....XX..........ooooooooooooooooooooooooooooooooooooooooooooooooooooooHoX.Hooo', '............................................................................................................................oo........XX...............ooooooooooooooooooooo.............................oX.Hooo', '............................................................................................................................oo........XX................oooooooooooooooooooo.............................oX.Hooo', '............................................................................................................................oo........XX................oooooooooooooooooooo.............................oX.Hooo', '............................................................................................................................oo........XX................oooooooooooooooooooo.............................oX.Hooo', '............................................................................................................................ooHooo....XX................oooooooooooooooooooo...........oooooooooooooooooooX.Hooo', '............................................................................................................................ooHooo....XX................oooooooooooooooooooo...........oooooooooooooooooooX.Hooo', '............................................................................................................................ooHooo....XX...............................................oooooooooooooooooooX.Hooo', '............................................................................................................................ooHooo....XX............................................ooooooooooooooooooooooX..ooo', '............................................................................................................................ooHooo....XX.........................................oooooooooooooooooooooooooX..ooo', '............................................................................................................................ooHooo....XX...oooooooooooo..........................oooooooooooooooooooooooooX..ooo', '............................................................................................................................ooHooo.........ooooooooooooo.....................................................ooo', '............................................................................................................................ooHooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo', '............................................................................................................................ooHooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo', '............................................................................................................................ooHooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo', '............................................................................................................................ooHooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo', '............................................................................................................................ooHooooooooooooo', '............................................................................................................................ooHooooooooooooo', '............................................................................................................................ooHooooooooooooo', '............................................................................................................................ooHooooooooooooo', '............................................................................................................................ooH...........oo', '............................................................................................................................ooH...........oo', '............................................................................................................................ooH...........oo', '............................................................................................................................ooH...........oo', '............................................................................................................................ooH...........oo', '............................................................................................................................ooH...........oo', '............................................................................................................................oo............oo', '............................................................................................................................oo............oo', '............................................................................................................................oo............oo', '............................................................................................................................oo............oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................ooXoooooXoooH.oo', '............................................................................................................................oo..........H.oo', '............................................................................................................................oo..........H.oo', '............................................................................................................................oo..........H.oo', '............................................................................................................................oo..........H.oo', '............................................................................................................................ooooooooooooH.oo', '............................................................................................................................ooooooooooooH.oo', '............................................................................................................................ooooooooooooH.oo', '............................................................................................................................ooooooooooooH.oo', '............................................................................................................................ooooooooooooH.oo', '......................................................................................ooooooooooooooooooooooooooooooooooooooooooooooooooH.oo', '......................................................................................ooooooooooooooooooooooooooooooooooooooooooooooooooH.oo', '......................................................................................ooooooooooooooooooooooooooooooooooooooooooooooooooH.oo', '......................................................................................ooo..........oooooooooooooooo..ooooooooooooooo..ooH.oo', '......................................................................................ooo..........ooooooooooo................oooo......H.oo', '......................................................................................ooo...............oo......................oo......H.oo', '......................................................................................oooHoooo............................................oo', '......................................................................................oooHooooo...........................................oo', '......................................................................................oooHoooooo..........................................oo', '......................................................................................oooHoooooooo........................................oo', '......................................................................................oooHooooooooo........................ooooooooooooooooo', '......................................................................................oooHoooooooooo...................ooooooooooooooooooooo', '......................................................................................oooHoooooooooooooooooooooooooooooooooooooooooooooooooo', '......................................................................................oooHoooooooooooooooooooooooooooooooooooooooooooooooooo', '......................................................................................oooHoooooooooooooooooooooooooooooooooooooooooooooooooo', '......................................................................................oooHoooooooooooooooooooooooooooooooooooooooooooooooooo', '.....................................................................................|oooHoooooooooooo|', '.....................................................................................|oooHoooooooooooo|', '.....................................................................................|oooH...........o|', '.....................................................................................|oooH...........o|', '.....................................................................................|oooH...........o|', '.....................................................................................|oooH...........o|', '.....................................................................................|oooH....M......o|', '.....................................................................................|oooH..oooooH...o|', '.....................................................................................|oooH..oooooH...o|', '.....................................................................................|ooo...oooooH...o|', '.....................................................................................|ooo...oooooH...o|', '.....................................................................................|ooo...ooo......o|', '.....................................................................................|ooo...ooo......o|', '.....................................................................................|oooooooooHoooooo|', '.....................................................................................|oooooooooHoooooo|', '.....................................................................................|oooooooooHoooooo|', '...................................................................................ooooooooooooHoooooo|', '..........o...o..o....ooo......o...o...............................................ooooooooooooHoooooo|', '..........o...o......o.........o...o...............................................ooooo.......H....oo|', '..........o...o..o..o..........o...o................................................oooo............oo|', '..........o...o..o..o.......o.........o.............................................oooo............oo|', '...........o.o...o...o.......oo.....oo...............................................ooo............oo|', '............o....o....ooo......ooooo.................................................ooo.*..........oo|', '......................................................................................oooox.x.x.oooHoo|', '......................................................................................oooooooooooooHoo|', '..........................................................ooooo........oo...............oooooooooooHoo|', '......................................................ooooooooo......oooo...............oooooooooooHoo|', '...........m...........................oo............ooooooooooooo...oooooo........ooo....oooooo....oo|', '....o......o..........................oooo...........oooooooooooooo..oooooox.x.x..oooo..............oo|', 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo|', 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo|', 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo|', 'oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo|'],
      objects: {
        o: ground,
        M: mememan,
        m: macer,
        H: stair
      },
      create: function(){
        var level_map, object_at, i$, to$, y, lresult$, j$, to1$, x, border_type, ref$, results$ = [];
        level_map = map(function(it){
          return it.split("");
        }, this$.map);
        object_at = function(x, y){
          var ref$;
          return this$.objects[(ref$ = level_map[y]) != null ? ref$[x] : void 8];
        };
        for (i$ = 0, to$ = level_map.length; i$ < to$; ++i$) {
          y = i$;
          lresult$ = [];
          for (j$ = 0, to1$ = level_map[y].length; j$ < to1$; ++j$) {
            x = j$;
            border_type = object_at(x + 1, y) == null && object_at(x + 1, y - 1) == null && object_at(x, y - 1) == null
              ? "TopRight"
              : object_at(x, y - 1) == null && object_at(x - 1, y - 1) == null && object_at(x - 1, y) == null
                ? "TopLeft"
                : object_at(x - 1, y) == null && object_at(x - 1, y + 1) == null && object_at(x, y + 1) == null
                  ? "BottomLeft"
                  : object_at(x, y + 1) == null && object_at(x + 1, y + 1) == null && object_at(x + 1, y) == null
                    ? "BottomRight"
                    : object_at(x + 1, y) == null
                      ? "Right" + y % 2
                      : object_at(x, y - 1) == null
                        ? "Top" + (x + 1 + y % 2) % 2
                        : object_at(x - 1, y) == null
                          ? "Left" + y % 2
                          : object_at(x, y + 1) == null
                            ? "Bottom" + x % 2
                            : "Center" + (x % 2 + y % 2 * 2);
            lresult$.push(typeof (ref$ = object_at(x, y)) === 'function' ? ref$({
              border_type: border_type
            }, {
              pos: v3(x * B, y * B, 0)
            }) : void 8);
          }
          results$.push(lresult$);
        }
        return results$;
      }
    };
  });
}).call(this);
