require! {fs,file,exec:child_process.exec}

log "Building project into index.html, please wait..."

file.walk __dirname+"/../", (a,b,c,d) ~>
	for fname in d when fname.indexOf(".ls")!=-1 and fname.indexOf("build")==-1 and fname.indexOf("index")==-1
		exec "node "+__dirname+"/makels.js "+fname, (a,b,c) ~>
			log b

exec "node "+__dirname+"/makels.js "+__dirname+"/../index.ls", (a,b,c) ~>
	log b
